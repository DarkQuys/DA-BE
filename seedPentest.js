const mongoose = require("mongoose");
const Roadmap = require("./models/Roadmap");
const connectDB = require('./config/db');
const Web_pentest = {
  "career": "web_pentester",
  "name": "Lộ trình Web Pentester",
  "description": "Lộ trình dành cho Web Pentester, tập trung vào nền tảng web, các lỗ hổng OWASP, tấn công phía server và web hiện đại.",
  "version": "1.0",
  "levels": [
    {
      "level": 0,
      "slug": "web-fundamentals",
      "name": "Giai đoạn 0 - Web & Tool Fundamentals",
      "goals": [
        "Hiểu kiến trúc web, HTTP, cookies, session, HTTPS.",
        "Làm quen với Burp Suite (Proxy, Repeater, Inspector).",
        "Nắm được tổng quan OWASP Top 10 và quy trình pentest web."
      ],
      "labs": [
        {
          "platform": "PortSwigger",
          "title": "SQL injection vulnerability in WHERE clause allowing retrieval of hidden data",
          "url": "https://portswigger.net/web-security/sql-injection/lab-retrieve-hidden-data"
        },
        {
          "platform": "PortSwigger",
          "title": "Reflected XSS into HTML context with nothing encoded",
          "url": "https://portswigger.net/web-security/cross-site-scripting/reflected/lab-html-context-nothing-encoded"
        }
      ]
    },
    {
      "level": 1,
      "slug": "core-web-vulns",
      "name": "Giai đoạn 1 - Core Web Vulns (SQLi, XSS, CSRF, Auth)",
      "goals": [
        "Thực hành SQL Injection (error-based, UNION-based cơ bản).",
        "Nắm vững Reflected/Stored XSS, CSRF, Clickjacking.",
        "Hiểu các lỗi xác thực đơn giản và session management yếu."
      ],
      "labs": [
        {
          "platform": "PortSwigger",
          "title": "SQL injection UNION attack, determining the number of columns returned by the query",
          "url": "https://portswigger.net/web-security/sql-injection/union-attacks/lab-determine-number-of-columns"
        },
        {
          "platform": "PortSwigger",
          "title": "Stored XSS into HTML context with nothing encoded",
          "url": "https://portswigger.net/web-security/cross-site-scripting/stored/lab-html-context-nothing-encoded"
        },
        {
          "platform": "SEED Labs",
          "title": "SEED Web SQL Injection Lab",
          "url": "https://seedsecuritylabs.org/Labs_20.04/Web/Web_SQL_Injection/"
        }
      ]
    },
    {
      "level": 2,
      "slug": "auth-access-control",
      "name": "Giai đoạn 2 - Authentication & Access Control",
      "goals": [
        "Tấn công xác thực: username enumeration, password bruteforce low & slow.",
        "Thực hành bypass 2FA, reset password flow, weak session token.",
        "Khai thác IDOR và các lỗi Broken Access Control."
      ],
      "labs": [
        {
          "platform": "PortSwigger",
          "title": "Username enumeration via different responses",
          "url": "https://portswigger.net/web-security/authentication/password-based/lab-username-enumeration-via-different-responses"
        },
        {
          "platform": "PortSwigger",
          "title": "2FA simple bypass",
          "url": "https://portswigger.net/web-security/authentication/multi-factor/lab-2fa-simple-bypass"
        },
        {
          "platform": "PortSwigger",
          "title": "User ID controlled by request parameter",
          "url": "https://portswigger.net/web-security/access-control/lab-user-id-controlled-by-request-parameter"
        }
      ]
    },
    {
      "level": 3,
      "slug": "advanced-server-api",
      "name": "Giai đoạn 3 - Advanced Server-side & API Hacking",
      "goals": [
        "Tấn công phía server: command injection, path traversal, file upload.",
        "Hiểu và khai thác SSRF, XXE, template injection, deserialization cơ bản.",
        "Pentest API: REST, JWT, CORS, rate limiting, ID-based access."
      ],
      "labs": [
        {
          "platform": "PortSwigger",
          "title": "OS command injection, simple case",
          "url": "https://portswigger.net/web-security/os-command-injection/lab-simple"
        },
        {
          "platform": "PortSwigger",
          "title": "File path traversal, simple case",
          "url": "https://portswigger.net/web-security/file-path-traversal/lab-simple"
        },
        {
          "platform": "PortSwigger",
          "title": "Basic SSRF against the local server",
          "url": "https://portswigger.net/web-security/ssrf/lab-basic-ssrf-against-localhost"
        },
        {
          "platform": "PortSwigger",
          "title": "Exploiting an API endpoint using documentation",
          "url": "https://portswigger.net/web-security/api-testing/lab-exploiting-api-endpoint-using-documentation"
        }
      ]
    }
  ]
}
    
async function seed() {
    try {
        await connectDB();

       // await Roadmap.deleteMany({});
        await Roadmap.create(Web_pentest);

        console.log("Seed Success");
        process.exit(0);
    } catch (err) {
        console.error(err);
        process.exit(1);
    }
}

seed();
